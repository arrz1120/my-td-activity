'use strict';var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var _self=void 0,WinScroller=function(){function a(b,c){_classCallCheck(this,a),_self=this,this.el='string'==typeof b?document.querySelector(b):b,this.opts=a.mergeOpts(c),this.body=document.querySelector('body'),this.body.style.minHeight=window.innerHeight+'px',this._init()}return _createClass(a,[{key:'_init',value:function _init(){this.direction=null,this.y=window.scrollY,this.pointer={y:0,startY:0,moveY:0},this.pullBounce=0,this.pushBounce=0,this.refresh(),this.body.addEventListener('touchstart',this._touchStart),this.body.addEventListener('touchmove',this._touchMove),this.body.addEventListener('touchend',this._touchEnd),window.addEventListener('scroll',this._onWinScroll)}},{key:'refresh',value:function refresh(){var c=this,b=window.innerHeight;this.pageH=this.body.getBoundingClientRect().height,this.maxScroll=0<Math.round(this.pageH-b)?Math.round(this.pageH-b):0,this.isStart=function(){return!c.maxScroll||0===window.scrollY}(),this.isEnd=function(){return!c.maxScroll||window.scrollY===c.maxScroll}()}},{key:'_touchStart',value:function _touchStart(b){var c=b.touches[0].pageY;_self.pointer.startY=c,_self.pointer.moveY=c,_self.refresh()}},{key:'_touchMove',value:function _touchMove(b){if(0===window.scrollY||window.scrollY>=_self.maxScroll){var c=b.touches[0].pageY;_self.direction=0<c-_self.pointer.moveY?'pull':'push',_self.pointer.moveY=c;var d=Math.round(.25*(_self.pointer.moveY-_self.pointer.startY));0===window.scrollY&&0<d&&(b.preventDefault(),_self.pullBounce=d,_self._translate(d,0),_self.opts.onPull&&_self.opts.onPull.call(_self,d)),window.scrollY==_self.maxScroll&&0>d&&(b.preventDefault(),_self.pushBounce=-d,_self._translate(d,0),_self.opts.onPush&&_self.opts.onPush.call(_self,-d))}}},{key:'_touchEnd',value:function _touchEnd(){_self._translate(0,250),_self.pullBounce&&_self.opts.onPulled&&_self.opts.onPulled.call(_self,_self.pullBounce),_self.pushBounce&&_self.opts.onPushed&&_self.opts.onPushed.call(_self,_self.pushBounce),_self.pullBounce=0,_self.pushBounce=0}},{key:'_onWinScroll',value:function _onWinScroll(){_self.y=window.scrollY,_self.opts.onScroll&&_self.opts.onScroll.call(_self,_self.y)}},{key:'_translate',value:function _translate(b,c){this.el.style.transform='translate(0,'+b+'px)',this.el.style.transition=c+'ms'}}],[{key:'mergeOpts',value:function mergeOpts(b){var c={onInit:null,onScroll:null,onPush:null,onPushed:null,onPulled:null,opPull:null,pullThreshold:25,pushThreshold:25};for(var d in b)c[d]=b[d];return c}}]),a}();window.WinScroller=WinScroller;